import{d as P}from"./chunk-4D34J5ZF.js";import{U as r,V as h,ba as b,da as C}from"./chunk-W5UII46D.js";import{Ca as p,M as l,R as c,Wa as f,Xa as y,Ya as g,a as m,b as u,ib as v,ra as d}from"./chunk-SOAL4WYF.js";var N=class n{userService=c(h);productData=c(P);mortgageCredits=this.productData.mortgageCredits;carLoans=this.productData.carLoans;creditCards=this.productData.creditCards;signOn(e){if(e.rate<=0)return;let t=this.userService.userState;e.loanAmount=this.getProductBalance(e)*(e.rate/100);let s=[...t().products,e];if(this.userService.userState.update(a=>u(m({},a),{products:s})),e.accountNumber=this.generateAccountNumber(),e.productType==="mortgage"){let a=e.loanAmount/(e.term*12);e.monthlyPayment=a,this.mortgageCredits.update(o=>[...o.filter(i=>i.id!==e.id)])}if(e.productType==="creditCard"){let a=e.loanAmount/(e.term*12);e.monthlyPayment=a,this.creditCards.update(o=>[...o.filter(i=>i.id!==e.id)])}if(e.productType==="carLoan"){let a=e.loanAmount/(e.term*12);e.monthlyPayment=a,this.carLoans.update(o=>[...o.filter(i=>i.id!==e.id)])}}getProductBalance(e){if(e.type!=="credit")return 0;switch(e.productType){case"carLoan":return this.calculateLoan(r.Auto.min,r.Auto.max);case"mortgage":return this.calculateLoan(r.Mortgage.min,r.Mortgage.max);case"creditCard":return this.calculateLoan(r.Card.min,r.Card.max);default:return 0}}calculateLoan(e,t){return parseFloat((Math.random()*(t-e)+e).toFixed(2))}generateAccountNumber(){return`${Math.floor(Math.random()*1e6)}`}static \u0275fac=function(t){return new(t||n)};static \u0275prov=l({token:n,factory:n.\u0275fac,providedIn:"root"})};var M=class n{goBack(){window.history.back()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=p({type:n,selectors:[["app-navbar"]],decls:2,vars:2,consts:[["pButton","","severity","secondary","icon","pi pi-angle-left",3,"click","outlined","text"]],template:function(t,s){t&1&&(y(0,"nav")(1,"button",0),v("click",function(){return s.goBack()}),g()()),t&2&&(d(),f("outlined",!0)("text",!0))},dependencies:[C,b],encapsulation:2})};export{N as a,M as b};
