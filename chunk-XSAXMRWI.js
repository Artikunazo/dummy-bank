import{d as P}from"./chunk-4D34J5ZF.js";import{U as r,V as v,ba as b,da as C}from"./chunk-W5UII46D.js";import{Ca as p,M as d,R as c,Wa as f,Xa as y,Ya as g,a as m,b as u,ib as h,ra as l}from"./chunk-SOAL4WYF.js";var N=class n{userService=c(v);productData=c(P);mortgageCredits=this.productData.mortgageCredits;carLoans=this.productData.carLoans;creditCards=this.productData.creditCards;signOn(t){if(t.rate<=0)return;let e=this.userService.userState;t.loanAmount=this.getProductBalance(t)*(t.rate/100);let s=[...e().products,t];if(this.userService.userState.update(a=>u(m({},a),{products:s})),t.accountNumber=this.generateAccountNumber(),t.productType==="mortgage"){let a=t.loanAmount/(t.term*12);t.monthlyPayment=a,this.mortgageCredits.update(o=>[...o.filter(i=>i.id!==t.id)])}if(t.productType==="creditCard"){let a=t.loanAmount/(t.term*12);t.monthlyPayment=a,this.creditCards.update(o=>[...o.filter(i=>i.id!==t.id)])}if(t.productType==="carLoan"){let a=t.loanAmount/(t.term*12);t.monthlyPayment=a,this.carLoans.update(o=>[...o.filter(i=>i.id!==t.id)])}}getProductBalance(t){if(t.type!=="credit")return 0;switch(t.productType){case"carLoan":return this.calculateLoan(r.Auto.min,r.Auto.max);case"mortgage":return this.calculateLoan(r.Mortgage.min,r.Mortgage.max);case"creditCard":return this.calculateLoan(r.Card.min,r.Card.max);default:return 0}}calculateLoan(t,e){return parseFloat((Math.random()*(e-t)+t).toFixed(2))}generateAccountNumber(){return`${Math.floor(Math.random()*1e6)}`}static \u0275fac=function(e){return new(e||n)};static \u0275prov=d({token:n,factory:n.\u0275fac,providedIn:"root"})};var M=class n{goBack(){window.history.back()}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=p({type:n,selectors:[["app-navbar"]],decls:2,vars:2,consts:[["pButton","","severity","secondary","icon","pi pi-angle-left",3,"click","outlined","text"]],template:function(e,s){e&1&&(y(0,"nav")(1,"button",0),h("click",function(){return s.goBack()}),g()()),e&2&&(l(),f("outlined",!0)("text",!0))},dependencies:[C,b],encapsulation:2})};var z={production:!0,baseAssetUrl:"https://artikunazo.github.io/dummy-bank/assets/"};export{N as a,M as b,z as c};
