<section class="mb-6 @container">
  <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">
    @for (item of userProducts(); track item.id) {
     @switch (item.productType) {
      @case(productType.Payroll) {
        <ng-container *ngTemplateOutlet="payrollTemplate; context: {$implicit: item}"></ng-container>
      }
      @case(productType.Checking) {
        <ng-container *ngTemplateOutlet="checkingTemplate; context: {$implicit: item}"></ng-container>
      }
      @case(productType.Mortgage) {
        <ng-container *ngTemplateOutlet="mortgageTemplate; context: {$implicit: item}"></ng-container>
      }
      @case (productType.CarLoan) {
        <ng-container *ngTemplateOutlet="carLoanTemplate; context: {$implicit: item}"></ng-container>
      }
      @case (productType.CreditCard) {
        <ng-container *ngTemplateOutlet="creditCardTemplate; context: {$implicit: item}"></ng-container>
      }
     }
    }
  </div>
</section>

<ng-template let-item #payrollTemplate>
  <app-card [header]="item.name" [subheader]="item.balance | currency">
    <div footer class="card-footer mt-6">
      <div class="card-footer flex justify-between gap-4">
        <app-button-card
          [buttonAttrTitle]="'Deposit funds'"
          [buttonIconName]="'deposit-funds'"
        />

        <app-button-card
          [buttonAttrTitle]="'Withdraw funds'"
          [buttonIconName]="'withdraw-funds'"
        />

         <app-button-card
            [buttonAttrTitle]="'View card details'"
            [buttonIconName]="'credit-card'"
            (buttonClick)="viewCardDetails(item.card)"
          />

          <app-button-card
          [buttonAttrTitle]="'Share account information'"
          [buttonIconName]="'share'"
        />

        </div>
      </div>
  </app-card>
</ng-template>

<ng-template let-item #checkingTemplate>
  <app-card [header]="item.name" [subheader]="item.balance | currency">
    <div footer class="card-footer mt-6">
      <div class="card-footer flex justify-between gap-4">
        <app-button-card
          [buttonAttrTitle]="'Deposit funds'"
          [buttonIconName]="'deposit-funds'"
        />

        <app-button-card
            [buttonAttrTitle]="'Withdraw funds'"
            [buttonIconName]="'withdraw-funds'"
          />

          <app-button-card
            [buttonAttrTitle]="'View card details'"
            [buttonIconName]="'credit-card'"
            (buttonClick)="viewCardDetails(item.card)"
          />

          <app-button-card
            [buttonAttrTitle]="'Share account information'"
            [buttonIconName]="'share'"
          />

      </div>
    </div>
  </app-card>
</ng-template>

<ng-template let-mortgage #mortgageTemplate>
  <app-card [header]="mortgage.name" [subheader]="mortgage.balance | currency">
    <div class="content">
      <p class="font-semibold">Remaining Balance: {{ mortgage.loanAmount | currency }}</p>
      <p >Monthly Payment: {{ mortgage.monthlyPayment | currency }}</p>
      <p >Mortgage Term: {{ mortgage.term }} years</p>
      <p >Rate: {{ mortgage.rate }}%</p>
      <p >Account Number: {{ mortgage.accountNumber }}</p>
    </div>
    <div footer class="card-footer mt-6">
      <div class="card-footer flex justify-between gap-4">
        <app-button-card
          [buttonAttrTitle]="'Pay Mortgage'"
          [buttonIconName]="'deposit-funds'"
        />
      </div>
    </div>
  </app-card>
</ng-template>

<ng-template let-carLoan #carLoanTemplate>
  <app-card [header]="carLoan.name" [subheader]="carLoan.balance | currency">
    <div class="content">
      <p class="font-semibold">Remaining Balance: {{ carLoan.loanAmount | currency }}</p>
      <p >Monthly Payment: {{ carLoan.monthlyPayment | currency }}</p>
      <p >Car Loan Term: {{ carLoan.term }} years</p>
      <p >Rate: {{ carLoan.rate }}%</p>
      <p >Account Number: {{ carLoan.accountNumber }}</p>
    </div>
    <div footer class="card-footer mt-6">
      <div class="card-footer flex justify-between gap-4">
        <app-button-card
          [buttonAttrTitle]="'Pay Car Loan'"
          [buttonIconName]="'deposit-funds'"
        />
      </div>
    </div>
  </app-card>
</ng-template>

<ng-template let-creditCard #creditCardTemplate>
  <app-card [header]="creditCard.name" [subheader]="creditCard.balance | currency">
    <div class="content">
      <p class="font-semibold">Remaining Balance: {{ creditCard.loanAmount | currency }}</p>
      <p >Monthly Payment: {{ creditCard.monthlyPayment | currency }}</p>
      <p >Credit Term: {{ creditCard.term }} years</p>
      <p >Rate: {{ creditCard.rate }}%</p>
      <p >Account Number: {{ creditCard.accountNumber }}</p>
    </div>
    <div footer class="card-footer mt-6">
      <div class="card-footer flex justify-between gap-4">
        <app-button-card
          [buttonAttrTitle]="'Pay Mortgage'"
          [buttonIconName]="'deposit-funds'"
        />

        <app-button-card
            [buttonAttrTitle]="'View card details'"
            [buttonIconName]="'credit-card'"
            (buttonClick)="viewCardDetails(creditCard.card)"
          />
      </div>
    </div>
  </app-card>
</ng-template>

